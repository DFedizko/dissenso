generator client {
    provider = "prisma-client"
    output   = "../prisma/generated"
}

datasource db {
    provider = "postgresql"
}

enum Role {
    USER
    AUTHOR
    ADMIN
}

model Article {
    id          String @id @default(uuid())
    title       String
    coverImage  String
    readingTime Int
    content     String
    tags        Json?
    slug        String

    userId String
    author   User   @relation(fields: [userId], references: [id])

    comments Comment[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model User {
    id    String @id @default(uuid())
    name  String
    email String @unique
    role  Role   @default(USER)

    articles Article[]
    comments Comment[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Comment {
    id      String @id @default(uuid())
    content String

    articleId String
    article   Article @relation(fields: [articleId], references: [id])

    userId String
    user   User   @relation(fields: [userId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
